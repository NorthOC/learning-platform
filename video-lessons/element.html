<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form method="post" id="form" name="Forma">
        <input type="hidden" name="json" id="json">
        <button onclick="createBlock()" id="new-block" type="button">New lesson</button>
        <button onclick="CheckingInfo()" id="new-block" type="button">Submit</button>
    </form>

    <p id="testing"></p>

    <script>
        function createBlock() {
            const newNode = document.createElement("div");
            newNode.classList.add("newclass");
            const title = document.createElement("label");
            title.innerHTML = "Lesson Title:";
            const title_input = document.createElement("input");
            title_input.classList.add("titleInput");

            const desc = document.createElement("label");
            desc.innerHTML = "Lesson Description:";
            const desc_input = document.createElement("input");
            desc_input.classList.add("descInput");

            const link = document.createElement("label");
            link.innerHTML = "Lesson Video";
            const link_desc = document.createElement("input");
            link_desc.classList.add("videoLink");

            newNode.appendChild(title);
            newNode.appendChild(title_input);

            newNode.appendChild(desc);
            newNode.appendChild(desc_input);

            newNode.appendChild(link);
            newNode.appendChild(link_desc);

            form = document.getElementById("form");
            btn = document.getElementById("new-block");
            form.insertBefore(newNode, btn);

        }
            
     function CheckingInfo(){
        var elements = document.getElementsByClassName("newclass");
        var json = {};
       for(var x=0;x<elements.length;x++){
        tempjson = {};
        console.log(elements[x]);
        var tempVar = elements[x];
        var title = tempVar.getElementsByClassName("titleInput");
        var desc = tempVar.getElementsByClassName("descInput");
        var link = tempVar.getElementsByClassName("videoLink");
        tempjson['title'] = title[0].value;
        tempjson['desc'] = desc[0].value;
        tempjson['link'] = link[0].value;
        json[x] = tempjson;
        //console.log(title[0].value);
       // console.log(desc[0].value);
       // console.log(link[0].value);
}
        inpt = document.getElementById("json");
        inpt.value = JSON.stringify(json);
        document.Forma.submit();
 }           
    </script>


</body>
</html>

